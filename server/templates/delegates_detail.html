{% extends "base.html" %}

{% block content %}
{% if delegate %}
<section class="rounded-xl border border-slate-800 bg-slate-900/70 p-4">
  <div class="mb-3 text-[11px] font-semibold uppercase tracking-[0.18em] text-slate-400">Delegate Detail</div>
  <div class="space-y-3">
    <div>
      <div class="text-[11px] font-semibold uppercase tracking-[0.16em] text-slate-400">Name</div>
      <div class="text-sm text-slate-200">{{ delegate.name }}</div>
    </div>
    <div>
      <div class="text-[11px] font-semibold uppercase tracking-[0.16em] text-slate-400">Delegate ID</div>
      <div class="text-sm text-slate-300">{{ delegate.id }}</div>
    </div>
    <div>
      <div class="text-[11px] font-semibold uppercase tracking-[0.16em] text-slate-400">Status</div>
      <div class="text-sm text-slate-300">{{ delegate.status }}</div>
    </div>
    <div>
      <div class="text-[11px] font-semibold uppercase tracking-[0.16em] text-slate-400">Contract Version</div>
      <div class="text-sm text-slate-300">{{ delegate.contract_version }}</div>
    </div>
    <div>
      <div class="text-[11px] font-semibold uppercase tracking-[0.16em] text-slate-400">Pricing Model</div>
      <div class="text-sm text-slate-300">{{ delegate.pricing_model or "n/a" }}</div>
    </div>
    <div>
      <div class="text-[11px] font-semibold uppercase tracking-[0.16em] text-slate-400">Last Seen</div>
      <div class="text-sm text-slate-300">{{ delegate.last_seen }}</div>
    </div>

    <form class="space-y-3 rounded-lg border border-slate-800 bg-slate-950/50 p-3" hx-post="/delegates/{{ delegate.id }}/assign" hx-target="#delegate-assign-result" hx-swap="innerHTML">
      <label class="block space-y-1">
        <span class="text-[11px] font-semibold uppercase tracking-[0.16em] text-slate-400">Capability</span>
        <select name="capability" class="w-full rounded-lg border border-slate-700 bg-slate-950/60 px-3 py-2 text-sm text-slate-100 focus:border-slate-500 focus:outline-none">
          {% for capability in delegate.capabilities %}
          <option value="{{ capability }}">{{ capability }}</option>
          {% endfor %}
        </select>
      </label>
      <label class="block space-y-1">
        <span class="text-[11px] font-semibold uppercase tracking-[0.16em] text-slate-400">Command</span>
        <textarea name="command" rows="3" class="w-full rounded-lg border border-slate-700 bg-slate-950/60 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-slate-500 focus:outline-none" placeholder="Describe what to delegate"></textarea>
      </label>
      <input type="hidden" name="correlation_id" value="" />
      <button class="inline-flex items-center rounded-md border border-slate-600 bg-slate-800 px-3 py-1.5 text-xs font-semibold uppercase tracking-wide text-slate-100 hover:bg-slate-700" type="submit">Assign Delegate</button>
    </form>

    <div id="delegate-assign-result" class="rounded-lg border border-dashed border-slate-700 bg-slate-950/50 p-3">
      <div class="text-[11px] font-semibold uppercase tracking-[0.16em] text-slate-400">Assignment Result</div>
      <div class="mt-2 text-sm text-slate-500">No delegation command submitted yet.</div>
    </div>
  </div>
</section>
{% else %}
<section class="rounded-xl border border-slate-800 bg-slate-900/70 p-4">
  <div class="mb-3 text-[11px] font-semibold uppercase tracking-[0.18em] text-slate-400">Delegate Detail</div>
  <div class="text-sm text-slate-500">Delegate not found.</div>
</section>
{% endif %}
{% endblock %}
