{% extends "base.html" %}
{% block content %}
<div class="grid">
  <section class="panel" id="ritual-thread" hx-get="/fragments/ritual" hx-trigger="load, every 20s" hx-swap="innerHTML">
    <div class="panel-title">Conversation Thread</div>
    <div class="panel-body">Loading...</div>
  </section>
  <section class="panel" id="chat-island" data-island="chat">
    <div class="panel-title">Live Chat (Island)</div>
    <div class="panel-body">
      <div class="island-status" data-role="status">Connecting...</div>
      <div class="island-log" data-role="log" aria-live="polite"></div>
      <form class="island-form" data-role="form">
        <label class="field">
          <span class="field-label">Message</span>
          <textarea name="message" rows="3" placeholder="Type an explicit message"></textarea>
        </label>
        <button class="button" type="submit">Send</button>
      </form>
    </div>
  </section>
</div>
{% endblock %}
{% block islands %}
<script src="/static/js/chat_island.js" type="module" defer></script>
{% endblock %}
